<!DOCTYPE html><html lang="pt-BR" dir="ltr"><head><meta charset="utf-8"><title>AngularJS: Definindo parâmetros opcionais com UI Router – Rafaell Lycan</title><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"> <meta name="apple-mobile-web-app-capable" content="yes"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"> <meta name="description" content="No passado nós vimos como utilizar o ngRoute e o UI Router para criar aplicações com Angular JS. Hoje vou explicar 3 formas que para definir rotas utilizando o UI Router e como isso pode ser útil para sua aplicação. "><meta name="keywords" content="desenvolvedor, front end, back end, developer, php, javascript, node, laravel, angular, react, software"><meta name="author" content="Rafaell Lycan - https://rafaell-lycan.com"/><meta name="reply-to" content="sonny.webdsg@gmail"/><link rel="canonical" href="https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/"><link rel="alternate" type="application/rss+xml" href="https://feeds.feedburner.com/rafaell-lycan" title="Rafaell Lycan RSS Feed"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel='dns-prefetch' href='//s2.getsmartlook.com'><link rel='dns-prefetch' href='//rec.getsmartlook.com'><link rel="preconnect" href="//google-analytics.com" crossorigin /><link rel="preconnect" href="//www.google-analytics.com" crossorigin /><link rel="preconnect" href="//fonts.googleapis.com" crossorigin /><link rel='preconnect' href='//s2.getsmartlook.com' crossorigin><link rel='preconnect' href='//rec.getsmartlook.com' crossorigin> <meta name="google-site-verification" content="x08xUXYXTQWjHPyl9M_w5VIF07UWLSi0XUTxxCSS7rQ" /><meta name="robots" content="index, follow"><meta name="HandheldFriendly" content="True" /><meta name="MobileOptimized" content="320" /><meta name="mobile-web-app-capable" content="yes"><link rel="manifest" href="/manifest.json"><link rel="icon" sizes="192x192" href="/assets/img/icon-192x192.png"><link rel="icon" sizes="144x144" href="/assets/img/icon-144x144.png"><link rel="apple-touch-icon" sizes="128x128" href="/assets/img/icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="128x128" href="/assets/img/icon-144x144.png"> <meta property="og:locale" content="pt_BR"><meta property="og:type" content=" article "><meta property="og:title" content="AngularJS: Definindo parâmetros opcionais com UI Router – Rafaell Lycan"><meta property="og:url" content="https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/"><meta property="og:image" content=""><meta property="og:description" content="No passado nós vimos como utilizar o ngRoute e o UI Router para criar aplicações com Angular JS. Hoje vou explicar 3 formas que para definir rotas utilizando o UI Router e como isso pode ser útil para sua aplicação. "><meta property="og:site_name" content="Hi there, I'm Rafaell"><meta property="article:publisher" content="https://www.facebook.com/rafaell.lycan"> <meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/"><meta name="twitter:title" content="AngularJS: Definindo parâmetros opcionais com UI Router – Rafaell Lycan"><meta name="twitter:image" content=""><meta name="twitter:description" content="No passado nós vimos como utilizar o ngRoute e o UI Router para criar aplicações com Angular JS. Hoje vou explicar 3 formas que para definir rotas utilizando o UI Router e como isso pode ser útil para sua aplicação. "><meta name="twitter:creator" content="@RafaellLycan"><meta property="twitter:account_id" content="50549691"> <script type="text/javascript"> if (window.location.hostname !== 'localhost') { window.smartlook||(function(d) { var o=smartlook=function(){ o.api.push(arguments)},s=d.getElementsByTagName('script')[0]; var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript'; c.charset='utf-8';c.src='//rec.getsmartlook.com/bundle.js';s.parentNode.insertBefore(c,s); })(document); smartlook('init', '71b434ed5cffc14b8ccad3c50573871bcb972ef9'); } </script><link rel="stylesheet" href="/assets/css/style.css" media="all"></head><body><main class="wrap"><header class="header"><div class="container"><div class="author"> <a href="/"> <img src="/assets/img/rafaell-lycan.jpg" alt="Rafaell Lycan profile picture" title="Back to home" class="author__avatar"> </a></div><nav class="menu-list menu-list--inline"><ul class="default-list"><li class="menu-list__item"><a href="/about">About me</a></li><li class="menu-list__item"><a href="/">Blog</a></li> </ul></nav></div></header><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><header class="blog-post__header"><h1 class="blog-post__title" itemprop="headline">AngularJS: Definindo parâmetros opcionais com UI Router</h1><div class="blog-post__meta"> <span>This post is filed under</span> <a class="h6 post-tag" href="/tags#javascript">javascript</a>, <a class="h6 post-tag" href="/tags#angular">angular</a> <span> • Published</span> <time class="h6" datetime="2016-12-31T00:00:00+01:00" itemprop="datePublished">31 Dec 2016</time> <span> • Reading time 4 min </span></div><p class="hidden" itemprop="keywords"></p></header><div class="blog-post__content"><p>Aos que estão me mandando dúvidas por email sobre AngularJS e o <a href="https://github.com/angular-ui/ui-router">UI Router</a>, vou tentar esclarecer algumas coisas.</p><p>Atualmente estou trabalhando em um dashboard para um dos clientes da <a href="http://www.gft.com/">GFT</a>. É possível criar serviços e adicionar eles para determinadas áreas (grupos/familias/centros de custo), ou você pode criar um processo de um serviço (com descrição, etapas de execução, responsáveis, etc) que cria automaticamente um ID com iniciais referentes ao grupo do serviço.</p><p>Neste ultimo cenário, precisamos passar o <code class="highlighter-rouge">id</code> de serviço relevante para o controller de processos. Existem várias maneiras em que podemos declarar os parâmetros opcionais no UI Router.</p><h2 id="query-parameters">Query Parameters</h2><p>Para mapearmos os parâmetros de URL (query params) em nossa aplicação, precisamos declara-los na configuração de estado (state) de nossa rotas:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">state</span><span class="p">(</span><span class="s1">'new-process'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/new?serviceId'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'/templates/process/new.html'</span><span class="p">,</span>
  <span class="na">controller</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$stateParams</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">serviceId</span> <span class="o">=</span> <span class="nx">$stateParams</span><span class="p">.</span><span class="nx">serviceId</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span></code></pre></figure><p>Você pode criar um link para esta rota utilizando o atributo <code class="highlighter-rouge">ui-sref</code>:</p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">ui-sref=</span><span class="s">"new-process({ serviceId: 2 })"</span><span class="nt">&gt;</span>New Process<span class="nt">&lt;/a&gt;</span></code></pre></figure><p>Isso irá navegar para a rota <code class="highlighter-rouge">/new?serviceId=2</code>.</p><p>Se você tiver vários parâmetros opcionais, separe eles com um <code class="highlighter-rouge">&amp;</code>:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">state</span><span class="p">(</span><span class="s1">'new-process'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/new?serviceId&amp;param1&amp;param2'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'/templates/process/new.html'</span><span class="p">,</span>
  <span class="na">controller</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$stateParams</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">serviceId</span> <span class="o">=</span> <span class="nx">$stateParams</span><span class="p">.</span><span class="nx">serviceId</span><span class="p">;</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">param1</span> <span class="o">=</span> <span class="nx">$stateParams</span><span class="p">.</span><span class="nx">param1</span><span class="p">;</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">param2</span> <span class="o">=</span> <span class="nx">$stateParams</span><span class="p">.</span><span class="nx">param2</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span></code></pre></figure><h2 id="parâmetros-de-rota-opcionais">Parâmetros de Rota Opcionais</h2><p>Parâmetros de rota no UI Router são opcionais por padrão. Sim, isso quer dizer que tanto <code class="highlighter-rouge">/new/2</code> e <code class="highlighter-rouge">/new/</code> funcionam, mas não apenas <code class="highlighter-rouge">/new</code> sem a ultima barra <code class="highlighter-rouge">/</code>. O sufixo <code class="highlighter-rouge">?</code> que vimos no exemplo acima simplesmente informar ao UI Router a onde ele deve começar a busca de parâmetros de URL. ex: <code class="highlighter-rouge">/new/:serviceId?</code>.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">state</span><span class="p">(</span><span class="s1">'new-process'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/new/:serviceId'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'/templates/process/new.html'</span><span class="p">,</span>
  <span class="na">controller</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$stateParams</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">serviceId</span> <span class="o">=</span> <span class="nx">$stateParams</span><span class="p">.</span><span class="nx">serviceId</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span></code></pre></figure><p>Atualizando o atributo <code class="highlighter-rouge">ui-sref</code> para <code class="highlighter-rouge">new-process({ serviceId: 2 })</code> iremos ter o link <code class="highlighter-rouge">/new/2</code>.</p><p>Se para você não é fã dessa barra como parâmetro, você vai ter que configurar uma outra abordagem para utilizar a rota sem parâmetros.</p><p>Para rotas com múltiplos parâmetros como <code class="highlighter-rouge">/services/process/:process/step/:step</code> talvez a única solução seja declarar várias rotas como <code class="highlighter-rouge">/services/process/:process</code> e <code class="highlighter-rouge">/services/process/:process/step/:step</code>.</p><h2 id="parâmetros-de-rotas-non-url">Parâmetros de Rotas Non-URL</h2><p>Recentemente descobri essa outra opção de passar parâmetros sem afetar a URL via o state do UI Router. No meu caso achei particularmente util pois não foi preciso nenhuma magia para solucionar o problema que tinha:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">state</span><span class="p">(</span><span class="s1">'new-process'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/new'</span><span class="p">,</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">serviceId</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'new.html'</span><span class="p">,</span>
  <span class="na">controller</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$stateParams</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">serviceId</span> <span class="o">=</span> <span class="nx">$stateParams</span><span class="p">.</span><span class="nx">serviceId</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span></code></pre></figure><p>Para utilizar isso apenas modifique o atributo <code class="highlighter-rouge">ui-sref</code> para <code class="highlighter-rouge">new-nonurl({ serviceId: 2 })</code> que isso vai gerar o link <code class="highlighter-rouge">/new</code> passando o parâmetro <code class="highlighter-rouge">serviceId</code>.</p><p>Você pode inclusive usar o objeto <code class="highlighter-rouge">params</code> para declarar valores padrão para os seus parâmetros de rota.</p></div><section class="share"><h3>Share this post</h3><ul class="social-list"><li class="social-list__item facebook hint--bottom" data-hint="Share on Facebook"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/" target="share"> <span class="social-list__text">Like</span> </a></li><li class="social-list__item twitter hint--bottom" data-hint="Share on Twitter"> <a href="https://twitter.com/share?text=AngularJS: Definindo parâmetros opcionais com UI Router&amp;url=https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/" target="share"> <span class="social-list__text">Tweet</span> </a></li><li class="social-list__item gplus hint--bottom" data-hint="Share on Google Plus"> <a href="https://plus.google.com/share?url=https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/" target="share"> <span class="social-list__text">+1</span> </a></li></ul></section><div class="comments"><div id="disqus_thread"></div></div><script> if (window.location.hostname !== 'localhost') { var disqus_shortname = 'rafaelllycan'; var disqus_identifier = '/2016/angular-definindo-parametros-opcionais-ui-router'; var disqus_config = function () { this.page.url = 'https://rafaell-lycan.com/2016/angular-definindo-parametros-opcionais-ui-router/'; this.page.identifier = '/2016/angular-definindo-parametros-opcionais-ui-router'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//' + disqus_shortname + '.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); s.async = true; (d.head || d.body).appendChild(s); })(); } </script></article><footer class="footer"><p> Made with <a href="https://jekyllrb.com/" target="_blank" class=" externalLink">Jekyll</a> and <span class="love">♥</span> by Rafaell Lycan.</p></footer></main><script async src="/assets/js/main.min.js"></script>  <script> !function(v,i,n,k,l,a){v.GoogleAnalyticsObject=n;v[n]||(v[n]=function(){ (v[n].q=v[n].q||[]).push(arguments)});v[n].l=+new Date;l=i.createElement(k); a=i.getElementsByTagName(k)[0];l.src='https://google-analytics.com/analytics.js'; a.parentNode.insertBefore(l,a)}(window,document,'ga','script'); ga('create', 'UA-16383035-5', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script></body></html>

<!DOCTYPE html><html lang="pt-BR" dir="ltr"><head><meta charset="utf-8"><title>Gulp - O Task Runner que chegou para ficar – Rafaell Lycan</title><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"> <meta name="apple-mobile-web-app-capable" content="yes"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"> <meta name="description" content="Pouco mais de um ano, utilizando Grunt como task runner comecei a repensar várias coisas quando descobri um novo concorrente. Com vocês Gulp. "><meta name="keywords" content="desenvolvedor, front end, back end, developer, php, javascript, node, laravel, angular, react, software"><meta name="author" content="Rafaell Lycan - https://rafaell-lycan.com"/><meta name="reply-to" content="sonny.webdsg@gmail"/><link rel="canonical" href="https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/"><link rel="alternate" type="application/rss+xml" href="https://feeds.feedburner.com/rafaell-lycan" title="Rafaell Lycan RSS Feed"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel='dns-prefetch' href='//s2.getsmartlook.com'><link rel='dns-prefetch' href='//rec.getsmartlook.com'><link rel="preconnect" href="//google-analytics.com" crossorigin /><link rel="preconnect" href="//www.google-analytics.com" crossorigin /><link rel="preconnect" href="//fonts.googleapis.com" crossorigin /><link rel='preconnect' href='//s2.getsmartlook.com' crossorigin><link rel='preconnect' href='//rec.getsmartlook.com' crossorigin> <meta name="google-site-verification" content="x08xUXYXTQWjHPyl9M_w5VIF07UWLSi0XUTxxCSS7rQ" /><meta name="robots" content="index, follow"><meta name="HandheldFriendly" content="True" /><meta name="MobileOptimized" content="320" /><meta name="mobile-web-app-capable" content="yes"><link rel="manifest" href="/manifest.json"><link rel="icon" sizes="192x192" href="/assets/img/icon-192x192.png"><link rel="icon" sizes="144x144" href="/assets/img/icon-144x144.png"><link rel="apple-touch-icon" sizes="128x128" href="/assets/img/icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="128x128" href="/assets/img/icon-144x144.png"> <meta property="og:locale" content="pt_BR"><meta property="og:type" content=" article "><meta property="og:title" content="Gulp - O Task Runner que chegou para ficar – Rafaell Lycan"><meta property="og:url" content="https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/"><meta property="og:image" content="https://rafaell-lycan.com/assets/img/posts/gulp.jpg"><meta property="og:description" content="Pouco mais de um ano, utilizando Grunt como task runner comecei a repensar várias coisas quando descobri um novo concorrente. Com vocês Gulp. "><meta property="og:site_name" content="Hi there, I'm Rafaell"><meta property="article:publisher" content="https://www.facebook.com/rafaell.lycan"> <meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/"><meta name="twitter:title" content="Gulp - O Task Runner que chegou para ficar – Rafaell Lycan"><meta name="twitter:image" content="https://rafaell-lycan.com/assets/img/posts/gulp.jpg"><meta name="twitter:description" content="Pouco mais de um ano, utilizando Grunt como task runner comecei a repensar várias coisas quando descobri um novo concorrente. Com vocês Gulp. "><meta name="twitter:creator" content="@RafaellLycan"><meta property="twitter:account_id" content="50549691"> <script type="text/javascript"> if (window.location.hostname !== 'localhost') { window.smartlook||(function(d) { var o=smartlook=function(){ o.api.push(arguments)},s=d.getElementsByTagName('script')[0]; var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript'; c.charset='utf-8';c.src='//rec.getsmartlook.com/bundle.js';s.parentNode.insertBefore(c,s); })(document); smartlook('init', '71b434ed5cffc14b8ccad3c50573871bcb972ef9'); } </script><link rel="stylesheet" href="/assets/css/style.css" media="all"></head><body><main class="wrap"><header class="header"><div class="container"><div class="author"> <a href="/"> <img src="/assets/img/rafaell-lycan.jpg" alt="Rafaell Lycan profile picture" title="Back to home" class="author__avatar"> </a></div><nav class="menu-list menu-list--inline"><ul class="default-list"><li class="menu-list__item"><a href="/about">About me</a></li><li class="menu-list__item"><a href="/">Blog</a></li> </ul></nav></div></header><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><header class="blog-post__header"><h1 class="blog-post__title" itemprop="headline">Gulp - O Task Runner que chegou para ficar</h1><div class="blog-post__meta"> <span>This post is filed under</span> <a class="h6 post-tag" href="/tags#produtividade">produtividade</a>, <a class="h6 post-tag" href="/tags#tools">tools</a> <span> • Published</span> <time class="h6" datetime="2014-06-29T00:00:00+02:00" itemprop="datePublished">29 Jun 2014</time> <span> • Reading time 5 min </span></div><figure class="blog-post__banner"> <img src="/assets/img/posts/gulp.jpg" alt="Gulp - O Task Runner que chegou para ficar" title="Gulp - O Task Runner que chegou para ficar" itemprop="thumbnailUrl"></figure><p class="hidden" itemprop="keywords"></p></header><div class="blog-post__content"><p>Pouco mais de um ano, utilizando <a href="https://rafaell-lycan.com/2014/automacao-de-tarefas-com-grunt/">Grunt</a> como task runner comecei a repensar várias coisas quando descobri um novo concorrente. Com vocês <a href="http://gulpjs.com/">Gulp</a>.</p><p>É engraçado como a percepção sobre alguma tecnologia pode mudar rapidamente não é? Quando conheci o <a href="http://gruntjs.com/">Grunt</a> em 2013 achei muito interessante principalmente por não ter mais que <strong>ficar atualizando meu browser</strong> a cada <code class="highlighter-rouge">ctrl+s</code>, <strong>compilar pré-processadores CSS</strong>, ou melhor ainda, criar uma <strong>task personalizada</strong> para <strong>concatenar</strong>, <strong>minificar</strong>, <strong>gerar sprites</strong> e muito mais.</p><p>Por outro lado, as vezes me sentia um pouco incomodado com a complexidade de fazer algumas coisas, ou simplesmente por ter que escrever muito <del>sou preguiçoso</del> o que coincidentemente me fez conhecer o <strong>Gulp</strong>.</p><p>O Grunt sem dúvidas é uma ferramenta fantástica, com uma grande comunidade, flexível <del>até certo ponto</del>, e provavelmente se você usa ou já viu a <a href="https://speakerdeck.com/almirfilho/esse-cara-e-o-grunt">palestra</a> do <a href="https://twitter.com/almirfilho">@almirfilho</a> sobre Grunt, provavelmente deve restar se perguntando “Porque eu deveria mudar?”. Bem, eu vou deixar alguns pontos do porque estou mudando e talvez isso possa te ajudar a ver as coisas como eu as vejo:</p><h2 id="gulp-e-grunt">Gulp e Grunt</h2><p>Ambos são os automatizadores, famosos, feitos em JS e possuem várias coisas em comum, tais como:</p><ul><li>Rodam em cima do <a href="https://nodejs.org/">Node</a> &lt;3;</li><li>Uma ótima comumidade, com vários plugins, etc;</li><li>Possuem uma <a href="http://en.wikipedia.org/wiki/Command-line_interface">CLI</a>;</li><li>Open source &lt;3;</li></ul><h2 id="gulp-x-grunt">Gulp x Grunt</h2><p>Bem agora chega a parte em que talvez <del>com certeza</del> serei um pouco chato, já que eu tenho uma perspectiva sobre os dois automatizadores.</p><h4 id="tio-grunt">Tio Grunt</h4><p>O Grunt sem dúvidas me ajudou muito, principalmente porque tudo o que eu precisava em quesito de <strong>plugins</strong> já estava no <a href="https://www.npmjs.com/">NPM</a> e a <strong>comunidade é bizarramente grande</strong>.</p><p>Em contra partida alguns pontos que me deixam #chateado com o Grunt:</p><ul><li>Arquivos de configuração realmente grandes <del>sou preguiçoso lembram?</del></li><li>Processamento lento dependendo do número de tasks que você tem configurado</li><li>Curva de aprendizado um pouco maior</li><li>Código não é exatamente elegante ;(</li></ul><p>Não te convenci? Então perá lá…</p><h4 id="tio-gulp">Tio Gulp</h4><p>Uma das coisas que me surpreendeu foi a <strong>simplicidade</strong> e a <strong>elegância</strong> ou escrever uma task no Gulp, normalmente são <strong>pequenas</strong>, <strong>idiomáticas</strong> e <strong>rápidas</strong> na execução.</p><p>Primeiro vamos criar um novo projeto, instalar nossas dependências e criar um arquivo chamado <strong>Gulpfile.js</strong>.</p><figure class="highlight"><pre><code class="language-powershell" data-lang="powershell"><span class="c1">#criamos o projeto e o arquivo package.json</span>
npm init

<span class="c1">#instalamos o gulp e suas dependencias (tasks) que iremos utilizar</span>
npm install gulp gulp-less gulp-autoprefixer --save-dev</code></pre></figure><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">),</span>
    <span class="nx">less</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-less'</span><span class="p">),</span>
    <span class="nx">autoprefixer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-autoprefixer'</span><span class="p">);</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'src/less/*.less'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">less</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">autoprefixer</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'assets/styles'</span><span class="p">));</span>
<span class="p">});</span></code></pre></figure><p>Entendeu o porque isso é lindo? Não? Então vamos aos detalhes do que faz o Gulp ser essa coisa linda de deus:</p><ul><li>Utiliza <a href="https://nodejs.org/api/stream.html">streams</a> o que faz reduzir o número de operações de I/O.</li><li>Você escreve código e não aquela configuração chata que com o tempo fica gigante</li><li>Tem <strong>pipes</strong>, o que nos permite encadear tarefas</li><li>Código simples e idiomático</li><li>API extremamente simples</li></ul><p>Uma outra coisa interessante no Gulp é que ele já vem por default com alguns métodos/tarefas em sua API como task(),run(), watch(), src()e dest().</p><p>Vejamos como ficaria fazer watch em arquivos e delegar tasks:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'watch'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/templates/**/*.jade'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'jade'</span><span class="p">]);</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/less/**/*.less'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'less'</span><span class="p">]);</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/js/**/*.js'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'js'</span><span class="p">]);</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/img/**/*.{jpg,png}'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'imagemin'</span><span class="p">]);</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'js'</span><span class="p">,</span> <span class="s1">'jade'</span><span class="p">,</span> <span class="s1">'less'</span><span class="p">,</span> <span class="s1">'imagemin'</span><span class="p">,</span> <span class="s1">'watch'</span><span class="p">,</span> <span class="s1">'browser-sync'</span><span class="p">]);</span></code></pre></figure><p>Neste meu simples exemplo, nós utilizamos o <code class="highlighter-rouge">watch()</code> <strong>nativo</strong> da API para observar meus arquivos arquivos e rodar tasks que eu tenha definido e também me possibilita rodar <strong>N</strong> comandos através de uma task default definida, da mesma forma que fazemos no Grunt, porem muito mais clara.</p><p>Mas como nada é perfeito, vamos aos pontos que eu considerei um pouco ruim:</p><ul><li>Menos plugins que o Grunt <del>continuo sendo preguiçoso</del> :P</li></ul><p>Em contra partida algumas vantagens sem ser as mencionadas que me fizeram mudar de ideia:</p><ul><li>Melhor performance, principalmente em ambiente de deploy</li><li>Plugins mais simples e bem menores</li><li>Utilização de libs padrão via API ao invés de utilizar plugins para tudo</li></ul><h2 id="mas-porque-você-fala-tanto-de-performance-precisa">Mas porque você fala tanto de performance? Precisa?</h2><p>Então, como eu sei que meu ambiente na <a href="http://aws.amazon.com/">AWS</a> é totalmente diferente do meu Macbook Pro (i7, 8GB, SSD, etc), eu fiz o teste com algumas tasks como <strong>Less</strong>, <strong>Jade</strong>, <strong>Imagemin</strong> e <strong>Uglify</strong>.</p><p>No Grunt, todas as tarefas exatamente nessa sequencia demorou em média <strong>2.813</strong> na minha maquina e <strong>3.420</strong> na AWS, enquanto o Gulp demorou <strong>1.82</strong> na minha maquina e milagrosos <strong>2.13</strong> na AWS.</p><h2 id="conclusão">Conclusão</h2><p>O Gulp sem dúvidas veio para ficar, principalmente nos meus novos projetos, mas isso não quer dizer que você deve mudar os seus projetos de Grunt para Gulp, só se for realmente viável.</p><p>Se você estiver confortável para mudar e não ver nenhum problema nisso OK, apesar de tudo o Grunt não é ruim e tem uma comunidade fantástica quando falamos de plugins, correção de bugs, etc… mas o que realmente importa é: O que você quer? Qual o melhor para o seu projeto?</p><p>Lembre-se que o Gulp é um pouco mais novo que o Grunt (cerca de 1 ano), eu particularmente tento não me apegar a uma certa tecnologia <del>e também sou preguiçoso</del>, ou seja, caso algo melhor venha a tona no mercado é muito provavel que eu também vou querer usar.</p><p>Lembre-se também que ambos vão evoluir com o tempo e o futuro é incerto sobre quem será o melhor. Uma dica que posso lhe dar é: fique atento, hoje eu uso Gulp e o amanhã é incerto.</p></div><section class="share"><h3>Share this post</h3><ul class="social-list"><li class="social-list__item facebook hint--bottom" data-hint="Share on Facebook"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/" target="share"> <span class="social-list__text">Like</span> </a></li><li class="social-list__item twitter hint--bottom" data-hint="Share on Twitter"> <a href="https://twitter.com/share?text=Gulp - O Task Runner que chegou para ficar&amp;url=https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/" target="share"> <span class="social-list__text">Tweet</span> </a></li><li class="social-list__item gplus hint--bottom" data-hint="Share on Google Plus"> <a href="https://plus.google.com/share?url=https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/" target="share"> <span class="social-list__text">+1</span> </a></li></ul></section><section class="related"><h3 class="related__title">Referências</h3><ul class="default-list"><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="http://www.sitepoint.com/introduction-gulp-js/" title="An Introduction to Gulp.js" target="_blank"> <span itemprop="name">An Introduction to Gulp.js</span> </a></li><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="http://blog.caelum.com.br/bye-bye-grunt-js-hello-gulp-js/" title="Bye bye Grunt.js, hello Gulp.js!" target="_blank"> <span itemprop="name">Bye bye Grunt.js, hello Gulp.js!</span> </a></li><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="http://tableless.com.br/gulp-o-novo-automatizador/" title="Gulp - O novo automatizador" target="_blank"> <span itemprop="name">Gulp - O novo automatizador</span> </a></li></ul></section><div class="comments"><div id="disqus_thread"></div></div><script> if (window.location.hostname !== 'localhost') { var disqus_shortname = 'rafaelllycan'; var disqus_identifier = '/2014/gulp-chegou-para-ficar'; var disqus_config = function () { this.page.url = 'https://rafaell-lycan.com/2014/gulp-chegou-para-ficar/'; this.page.identifier = '/2014/gulp-chegou-para-ficar'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//' + disqus_shortname + '.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); s.async = true; (d.head || d.body).appendChild(s); })(); } </script></article><footer class="footer"><p> Made with <a href="https://jekyllrb.com/" target="_blank" class=" externalLink">Jekyll</a> and <span class="love">♥</span> by Rafaell Lycan.</p></footer></main><script async src="/assets/js/main.min.js"></script>  <script> !function(v,i,n,k,l,a){v.GoogleAnalyticsObject=n;v[n]||(v[n]=function(){ (v[n].q=v[n].q||[]).push(arguments)});v[n].l=+new Date;l=i.createElement(k); a=i.getElementsByTagName(k)[0];l.src='https://google-analytics.com/analytics.js'; a.parentNode.insertBefore(l,a)}(window,document,'ga','script'); ga('create', 'UA-16383035-5', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script></body></html>

<!DOCTYPE html><html lang="pt-BR" dir="ltr"><head><meta charset="utf-8"><title>AngularJS: Services, Factories e Providers – Rafaell Lycan</title><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"> <meta name="apple-mobile-web-app-capable" content="yes"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"> <meta name="description" content="Angular.js e suas drogas. Este post visa explicar as diferenças entre os tipos distintos de serviços no Angular, sejam eles Services, Factories ou Providers. "><meta name="keywords" content="desenvolvedor, front end, back end, developer, php, javascript, node, laravel, angular, react, software"><meta name="author" content="Rafaell Lycan - https://rafaell-lycan.com"/><meta name="reply-to" content="sonny.webdsg@gmail"/><link rel="canonical" href="https://rafaell-lycan.com/2015/angular-services-factories-providers/"><link rel="alternate" type="application/rss+xml" href="https://feeds.feedburner.com/rafaell-lycan" title="Rafaell Lycan RSS Feed"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel='dns-prefetch' href='//s2.getsmartlook.com'><link rel='dns-prefetch' href='//rec.getsmartlook.com'><link rel="preconnect" href="//google-analytics.com" crossorigin /><link rel="preconnect" href="//www.google-analytics.com" crossorigin /><link rel="preconnect" href="//fonts.googleapis.com" crossorigin /><link rel='preconnect' href='//s2.getsmartlook.com' crossorigin><link rel='preconnect' href='//rec.getsmartlook.com' crossorigin> <meta name="google-site-verification" content="x08xUXYXTQWjHPyl9M_w5VIF07UWLSi0XUTxxCSS7rQ" /><meta name="robots" content="index, follow"><meta name="HandheldFriendly" content="True" /><meta name="MobileOptimized" content="320" /><meta name="mobile-web-app-capable" content="yes"><link rel="manifest" href="/manifest.json"><link rel="icon" sizes="192x192" href="/assets/img/icon-192x192.png"><link rel="icon" sizes="144x144" href="/assets/img/icon-144x144.png"><link rel="apple-touch-icon" sizes="128x128" href="/assets/img/icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="128x128" href="/assets/img/icon-144x144.png"> <meta property="og:locale" content="pt_BR"><meta property="og:type" content=" article "><meta property="og:title" content="AngularJS: Services, Factories e Providers – Rafaell Lycan"><meta property="og:url" content="https://rafaell-lycan.com/2015/angular-services-factories-providers/"><meta property="og:image" content="https://rafaell-lycan.com/assets/img/posts/angularjs-services.jpg"><meta property="og:description" content="Angular.js e suas drogas. Este post visa explicar as diferenças entre os tipos distintos de serviços no Angular, sejam eles Services, Factories ou Providers. "><meta property="og:site_name" content="Hi there, I'm Rafaell"><meta property="article:publisher" content="https://www.facebook.com/rafaell.lycan"> <meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://rafaell-lycan.com/2015/angular-services-factories-providers/"><meta name="twitter:title" content="AngularJS: Services, Factories e Providers – Rafaell Lycan"><meta name="twitter:image" content="https://rafaell-lycan.com/assets/img/posts/angularjs-services.jpg"><meta name="twitter:description" content="Angular.js e suas drogas. Este post visa explicar as diferenças entre os tipos distintos de serviços no Angular, sejam eles Services, Factories ou Providers. "><meta name="twitter:creator" content="@RafaellLycan"><meta property="twitter:account_id" content="50549691"> <script type="text/javascript"> if (window.location.hostname !== 'localhost') { window.smartlook||(function(d) { var o=smartlook=function(){ o.api.push(arguments)},s=d.getElementsByTagName('script')[0]; var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript'; c.charset='utf-8';c.src='//rec.getsmartlook.com/bundle.js';s.parentNode.insertBefore(c,s); })(document); smartlook('init', '71b434ed5cffc14b8ccad3c50573871bcb972ef9'); } </script><link rel="stylesheet" href="/assets/css/style.css" media="all"></head><body><main class="wrap"><header class="header"><div class="container"><div class="author"> <a href="/"> <img src="/assets/img/rafaell-lycan.jpg" alt="Rafaell Lycan profile picture" title="Back to home" class="author__avatar"> </a></div><nav class="menu-list menu-list--inline"><ul class="default-list"><li class="menu-list__item"><a href="/about">About me</a></li><li class="menu-list__item"><a href="/">Blog</a></li> </ul></nav></div></header><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><header class="blog-post__header"><h1 class="blog-post__title" itemprop="headline">AngularJS: Services, Factories e Providers</h1><div class="blog-post__meta"> <span>This post is filed under</span> <a class="h6 post-tag" href="/tags#angular">angular</a> <span> • Published</span> <time class="h6" datetime="2015-05-23T00:00:00+02:00" itemprop="datePublished">23 May 2015</time> <span> • Reading time 5 min </span></div><figure class="blog-post__banner"> <img src="/assets/img/posts/angularjs-services.jpg" alt="AngularJS: Services, Factories e Providers" title="AngularJS: Services, Factories e Providers" itemprop="thumbnailUrl"></figure><p class="hidden" itemprop="keywords"></p></header><div class="blog-post__content"><p>Bem, sem dúvidas todos os que estão começando ou estão a algum tempo trabalhando com <strong><a href="https://angularjs.org/">Angular.js</a></strong> já se perguntaram qual a diferença dos módulos <strong>Factory</strong>, <strong>Service</strong> e <strong>Provider</strong>; Eu particularmente li diversas vezes a documentação para entender realmente a diferença principalmente entre Factory e Service.</p><p>O Angular vem com diversos módulos de serviços, cada um com seus tipos de uso e propósito <del>as vezes parece tudo igual, mas…</del> .</p><p>Os serviços são sempre padrão <strong><a href="http://en.wikipedia.org/wiki/Singleton_pattern">singleton</a></strong>, mas enfim, chega de enrolação e bora pro que realmente interessa.</p><h2 id="factory">Factory</h2><p>O <strong>Factory</strong> é sem dúvidas o tipo mais comum utilizado no mundo Angular e provavelmente o mais fácil e simples de entender.</p><p>Um <strong>Factory</strong> pode retornar qualquer tipo de dado, não existe uma maneira ou padrão explicito que você deva seguir para criar esses dados, você precisa somente retornar algo.</p><p>Se você leu o livro sobre <strong><a href="http://shop.oreilly.com/product/0636920025832.do">JavaScript Design Patters</a></strong> do <strong><a href="https://twitter.com/addyosmani">Addy Osmani</a></strong>, provavelmente viu o <strong><a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript">Revealing Module Pattern</a></strong>, que é um padrão que eu particularmente gosto de utilizar.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'todoListService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">todoList</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">function</span> <span class="nx">addTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Sua implementação</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">removeTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Sua implementação</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">todoList</span><span class="p">:</span> <span class="nx">todoList</span><span class="p">,</span>
    <span class="na">addTodo</span><span class="p">:</span> <span class="nx">addTodo</span><span class="p">,</span>
    <span class="na">removeTodo</span><span class="p">:</span> <span class="nx">removeTodo</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyController'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'todoListService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">todoListService</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">todoList</span> <span class="o">=</span> <span class="nx">todoListService</span><span class="p">.</span><span class="nx">todoList</span><span class="p">;</span>
<span class="p">}]);</span></code></pre></figure><p><strong><a href="http://jsfiddle.net/ya1ewy78/">Veja o exemplo neste link</a></strong></p><h2 id="service">Service</h2><p>O <strong>Service</strong> trabalha muito parecido com o <strong>Factory</strong>, porem a direfença é que o <strong>Service</strong> nos da como retorno uma uma instancia dele mesmo ao invés de retornar um novo objeto como em <strong>Factory</strong>, em outras palavras é como se estivese-mos utilizando um <code class="highlighter-rouge">new ServiceName()</code>.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">app</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'todoListService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">todoList</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">addTodo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Sua implementação</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">removeTodo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Sua implementação</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyController'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'todoListService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">todoListService</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">todoList</span> <span class="o">=</span> <span class="nx">todoListService</span><span class="p">.</span><span class="nx">todoList</span><span class="p">;</span>
<span class="p">}]);</span></code></pre></figure><p><strong><a href="http://jsfiddle.net/L2dydeq5/">Veja o exemplo neste link</a></strong></p><h2 id="provider">Provider</h2><p><strong>Providers</strong> são muito parecidos com <strong>Services</strong> e <strong>Factories</strong>, porem são completamente configuraveis, o que pode tornalos um pouco mais complexos. Você só precisa retornar seu serviço em uma função chamada <code class="highlighter-rouge">$get</code> que nos dá a API publica daquele serviço, em outras palavrás o que vier dentro do nosso retorno em <code class="highlighter-rouge">$get</code> funciona exatamente como um <strong>factory</strong> por exemplo.</p><p>Mas porque devemos utilizar um <strong>provider</strong> ao invés de um <strong>factory</strong> então? <strong>Providers</strong> por si mesmos tem a caracteristica de serem configuráveis na <strong>etapa de configuração</strong>, em outras palavras podemos implementar o mesmo serviço desta maneira:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">app</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">'todoListService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">todoList</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">loadDefaults</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newList</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">todoList</span> <span class="o">=</span> <span class="nx">newList</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">$get</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">function</span> <span class="nx">addTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Sua implementação</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">removeTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Sua implementação</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="na">todoList</span><span class="p">:</span> <span class="nx">todoList</span><span class="p">,</span>
        <span class="na">addTodo</span><span class="p">:</span> <span class="nx">addTodo</span><span class="p">,</span>
        <span class="na">removeTodo</span><span class="p">:</span> <span class="nx">removeTodo</span>
      <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">todoListServiceProvider</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">todoListServiceProvider</span><span class="p">.</span><span class="nx">loadDefaults</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyController'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'todoListService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">todoListService</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">todoList</span> <span class="o">=</span> <span class="nx">todoListService</span><span class="p">.</span><span class="nx">todoList</span><span class="p">;</span>
<span class="p">}]);</span></code></pre></figure><p><strong><a href="http://jsfiddle.net/webjm28f/">Veja o exemplo neste link</a></strong></p><p>Neste exemplo eu deixei a propriedade <code class="highlighter-rouge">todoList</code> do nosso serviço e em seguida criei um método <code class="highlighter-rouge">loadDefaults</code> fora da função <code class="highlighter-rouge">$get</code> justamente para torna-lo acessível apenas na etapa de configuração mudando assim o valor padrão de <code class="highlighter-rouge">todoList</code>.</p><p>Não entendeu ainda? Então imagine criar um módulo totalmente genérico para acessar recursos (REST), como você iria gerir as URLs desses endpoints? Hard code? Por isso a ideia é criar um serviço que seja capaz de configurar essas URLs através de um objeto mapeado talvez e o serviço utiliza-las atráves da API publica.</p><p>No Angular, temos diversos providers para configurar alguns serviços como <code class="highlighter-rouge">$routeProvider</code> ou <code class="highlighter-rouge">$locationProvider</code> para configurarmos nossas rotas, modo HTML5, etc.</p><p>Providers provavelmente são os serviços mais chatos de entender, depois de algum tempo desenvolvendo eu consegui entender seu papel dentro do ecossistema Angular.</p><h2 id="bonus">Bonus</h2><p>Uma ultima coisa que não tem muito haver com o título do post, mas achei interessante mencionar é que <strong>Values</strong> e <strong>Constantes</strong> também podem ser considerados como serviços dentro do ecossistema Angular. Curioso não?</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">app</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'appInfoValue'</span><span class="p">,</span> <span class="p">{</span><span class="na">version</span><span class="p">:</span> <span class="s2">"2.0"</span><span class="p">}</span> <span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s1">'appInfoConstant'</span><span class="p">,</span> <span class="p">{</span><span class="na">version</span><span class="p">:</span> <span class="s2">"2.0"</span><span class="p">}</span> <span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyController'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'appInfoValue'</span><span class="p">,</span> <span class="s1">'appInfoConstant'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">appInfoValue</span><span class="p">,</span> <span class="nx">appInfoConstant</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">appInfoValue</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="kr">const</span> <span class="o">=</span> <span class="nx">appInfoValue</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span>
<span class="p">}]);</span></code></pre></figure><p><strong><a href="http://jsfiddle.net/7p8h9qoa/">Veja o exemplo neste link</a></strong></p></div><section class="share"><h3>Share this post</h3><ul class="social-list"><li class="social-list__item facebook hint--bottom" data-hint="Share on Facebook"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://rafaell-lycan.com/2015/angular-services-factories-providers/" target="share"> <span class="social-list__text">Like</span> </a></li><li class="social-list__item twitter hint--bottom" data-hint="Share on Twitter"> <a href="https://twitter.com/share?text=AngularJS: Services, Factories e Providers&amp;url=https://rafaell-lycan.com/2015/angular-services-factories-providers/" target="share"> <span class="social-list__text">Tweet</span> </a></li><li class="social-list__item gplus hint--bottom" data-hint="Share on Google Plus"> <a href="https://plus.google.com/share?url=https://rafaell-lycan.com/2015/angular-services-factories-providers/" target="share"> <span class="social-list__text">+1</span> </a></li></ul></section><section class="related"><h3 class="related__title">Referências</h3><ul class="default-list"><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="https://docs.angularjs.org/guide/services" title="Developer Guide - Services" target="_blank"> <span itemprop="name">Developer Guide - Services</span> </a></li><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="https://docs.angularjs.org/guide/providers" title="Developer Guide - Providers" target="_blank"> <span itemprop="name">Developer Guide - Providers</span> </a></li><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="http://tylermcginnis.com/angularjs-factory-vs-service-vs-provider/" title="AngularJS - Factory vs Service vs Provider by Tyler McGinnis" target="_blank"> <span itemprop="name">AngularJS - Factory vs Service vs Provider by Tyler McGinnis</span> </a></li></ul></section><div class="comments"><div id="disqus_thread"></div></div><script> if (window.location.hostname !== 'localhost') { var disqus_shortname = 'rafaelllycan'; var disqus_identifier = '/2015/angular-services-factories-providers'; var disqus_config = function () { this.page.url = 'https://rafaell-lycan.com/2015/angular-services-factories-providers/'; this.page.identifier = '/2015/angular-services-factories-providers'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//' + disqus_shortname + '.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); s.async = true; (d.head || d.body).appendChild(s); })(); } </script></article><footer class="footer"><p> Made with <a href="https://jekyllrb.com/" target="_blank" class=" externalLink">Jekyll</a> and <span class="love">♥</span> by Rafaell Lycan.</p></footer></main><script async src="/assets/js/main.min.js"></script>  <script> !function(v,i,n,k,l,a){v.GoogleAnalyticsObject=n;v[n]||(v[n]=function(){ (v[n].q=v[n].q||[]).push(arguments)});v[n].l=+new Date;l=i.createElement(k); a=i.getElementsByTagName(k)[0];l.src='https://google-analytics.com/analytics.js'; a.parentNode.insertBefore(l,a)}(window,document,'ga','script'); ga('create', 'UA-16383035-5', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script></body></html>
